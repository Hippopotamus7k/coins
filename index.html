<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–∞–ø–∏–∫–æ–∏–Ω—ã ‚Äî cards_7kbot</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
    }
    .container {
      background: white;
      border-radius: 16px;
      padding: 20px;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      margin-top: 0;
      color: #1a73e8;
    }
    .info-box {
      background: #e8f0fe;
      padding: 12px;
      border-radius: 8px;
      margin: 12px 0;
      font-size: 14px;
      color: #1967d2;
    }
    input {
      width: 100%;
      padding: 12px;
      margin: 12px 0;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
      text-align: center;
      letter-spacing: 2px;
      text-transform: uppercase;
    }
    button {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }
    .primary { background: #1a73e8; color: white; }
    .success { background: #34a853; color: white; }
    .warning { background: #fbbc04; color: black; }
    .danger { background: #ea4335; color: white; }
    .hidden { display: none !important; }
  </style>
</head>
<body>
  <div class="container" id="authView">
    <h2>ü™ô –ö–∞–ø–∏–∫–æ–∏–Ω—ã</h2>
    <div class="info-box" id="userInfo"></div>
    <p>–ü–æ–ª—É—á–∏—Ç–µ –∫–æ–¥ –≤ –±–æ—Ç–µ:</p>
    <button class="primary" onclick="getCode()">üîë –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥</button>
    <input type="text" id="authCode" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ –±–æ—Ç–∞" maxlength="8" />
    <button class="success" onclick="submitAuth()">‚úÖ –í–æ–π—Ç–∏</button>
  </div>

  <div class="container hidden" id="mainView">
    <div class="info-box" id="balanceInfo">–ë–∞–ª–∞–Ω—Å: ???</div>
    <h2>üõí –ú–∞–≥–∞–∑–∏–Ω</h2>
    <button class="warning" onclick="buyPack('mini')">–ö—É–ø–∏—Ç—å Mini Pack (3300)</button>
    <button class="warning" onclick="buyPack('superheroes')">–ö—É–ø–∏—Ç—å SuperHeroes (6500)</button>

    <h2>üéÆ –ò–≥—Ä—ã</h2>
    <button class="danger" onclick="playCoin()">–°—ã–≥—Ä–∞—Ç—å –≤ –º–æ–Ω–µ—Ç–∫—É</button>

    <div style="margin-top: 20px;">
      <button class="primary" onclick="reauth()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
    </div>
  </div>

  <script>
    const BOT_USERNAME = "cards_7kbot";
    const initData = window.Telegram?.WebApp?.initDataUnsafe;
    const userId = initData?.user?.id;

    if (!userId) {
      alert("‚ö†Ô∏è –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram!");
    }

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º ID —Å—Ä–∞–∑—É
    document.getElementById("userInfo").innerHTML = `–í–∞—à ID: <b>${userId}</b>`;

    function getCode() {
      window.location.href = `https://t.me/${BOT_USERNAME}?start=get_code`;
    }

    function submitAuth() {
      const code = document.getElementById("authCode").value.trim().toUpperCase();
      if (!code || code.length < 6) {
        alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∫–æ–¥ (6‚Äì8 —Å–∏–º–≤–æ–ª–æ–≤).");
        return;
      }
      // –ë–∞–ª–∞–Ω—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω ‚Äî –ø–æ–∫–∞–∂–µ–º –ø–æ–∑–∂–µ —á–µ—Ä–µ–∑ –±–æ—Ç–∞
      document.getElementById("balanceInfo").innerText = "–ë–∞–ª–∞–Ω—Å: (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ –±–æ—Ç–µ)";
      document.getElementById("authView").classList.add("hidden");
      document.getElementById("mainView").classList.remove("hidden");
    }

    function buyPack(pack) {
      const price = pack === "mini" ? 3300 : 6500;
      const packName = pack === "mini" ? "Mini Pack" : "SuperHeroes";
      if (!confirm(`–ö—É–ø–∏—Ç—å ${packName} –∑–∞ ${price} –∫–æ–∏–Ω–æ–≤?`)) return;
      window.location.href = `https://t.me/${BOT_USERNAME}?start=webbuy_${pack}_${userId}`;
    }

    function playCoin() {
      const choice = prompt("–í—ã–±–µ—Ä–∏—Ç–µ: –æ—Ä–µ–ª –∏–ª–∏ —Ä–µ—à–∫–∞?");
      if (!choice) return;
      const cleanChoice = choice.toLowerCase().trim();
      if (cleanChoice !== "–æ—Ä–µ–ª" && cleanChoice !== "—Ä–µ—à–∫–∞") {
        alert("–í–≤–µ–¥–∏—Ç–µ '–æ—Ä–µ–ª' –∏–ª–∏ '—Ä–µ—à–∫–∞'");
        return;
      }
      window.location.href = `https://t.me/${BOT_USERNAME}?start=webgame_coin_${cleanChoice}_${userId}`;
    }

    function reauth() {
      document.getElementById("mainView").classList.add("hidden");
      document.getElementById("authView").classList.remove("hidden");
      document.getElementById("authCode").value = "";
    }
  </script>
</body>
</html>
